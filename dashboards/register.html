<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Food delivery</title>
  <link rel="stylesheet" href="login.css">
</head>
<body>
 
  <header id="head">
    <p>Your favorite Dishes, Delivered to you</p>

  </header>


  <main id="main">
    <div id="login-box">
      <form id="login-user">
        <label for="name ">Enter Your First Name</label>
        <input type="text" id="fname" placeholder="First Name" required>

        <label for="name ">Enter Your Last Name</label>
        <input type="text" id="lname" placeholder="Last Name" required>

        <label for="ph-no">Enter Mobile Number</label>
        <input type="number" id="ph-no" placeholder="Mobile Number" required>
        
        <label for="pass">Enter your password</label>
        <input type="password" id="pass" placeholder="Password" required>

        <label for="pass">Re-Enter your password</label>
        <input type="password" id="re-pass" placeholder="Password" required>
        
        <button id="login" type="submit" onclick="login()">Register</button>
      </form>

    </div>

    
  </main>
  <script>


function validatePassword(password) {
  
  const regex = /^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
  return regex.test(password);
}


function validateMobile(mobile) {
  const regex = /^\d{10}$/;
  return regex.test(mobile);
}

const registerForm = document.getElementById("login-user");

registerForm.addEventListener("submit", async function(event) {
  event.preventDefault();

  const fname = document.getElementById("fname").value.trim();
  const lname = document.getElementById("lname").value.trim();
  const mobile = document.getElementById("ph-no").value.trim();
  const password = document.getElementById("pass").value;
  const rePass = document.getElementById("re-pass").value;

  
  if (!validateMobile(mobile)) {
    alert("Enter valid mobile number");
    return;
  }


  if (password !== rePass) {
    alert("Passwords do not match!");
    return;
  }

  
  if (!validatePassword(password)) {
    alert("Password must be at least 8 characters long, include 1 uppercase letter, 1 number, and 1 special character.");
    return;
  }

  const userData = {
    firstName: fname,
    lastName: lname,
    mobile: mobile,
    password: password
  };

  try {
    const result = await register(userData); 
    console.log("Server response:", result);

    if (result.success) {
      alert("Registration successful!");
      window.location.href = "login.html";
    } else {
      alert("Registration failed: " + result.message);
    }
  } catch (error) {
    console.error("Error:", error);
    alert("Something went wrong!");
  }
});



  </script>

 
</body>
</html>
